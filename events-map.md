# Events Map

[TOC]

## Event List

### UserManagmentRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| event    | [SessionCreatedEvent](https://github.com/OpenMAVN/MAVN.Service.Sessions/blob/master/contract/MAVN.Service.Sessions.Contracts/SessionCreatedEvent.cs) | Create a new session for customer                            | <ul><li>CustomerId</li><li>TimeStamp</li><ul>                | [Lykke.Service.Sessions](https://github.com/OpenMAVN/mavn.service.sessions) |
| event    | SessionEndedEvent                                            | Session is ended for customer                                | <ul><li>CustomerId</li><li>TimeStamp</li><li>Token</li><ul>  | [Lykke.Service.Sessions](https://github.com/OpenMAVN/mavn.service.sessions) |
| event    | [CustomerRegistrationEvent](https://github.com/OpenMAVN/MAVN.Service.CustomerManagement/tree/master/contract/MAVN.Service.CustomerManagement.Contract/Events/CustomerRegistrationEvent.cs) | Register new account for customer                            | <ul><li>CustomerId</li><li>TimeStamp</li><ul>                | [Lykke.Service.CustomerManagement](https://github.com/OpenMAVN/mavn.service.customermanagement) |
| event    | Customer  profile updated                                    | Update (or create) customer profile                          | <ul><li>CustomerId</li><li>TimeStamp</li><ul>                |                                                              |
| event    | [EmailVerifiedEvent](https://github.com/OpenMAVN/MAVN.Service.CustomerProfile/blob/master/contract/MAVN.Service.CustomerProfile.Contract/EmailVerifiedEvent.cs) | Customer email was verified                                  | <ul><li>CustomerId</li><li>TimeStamp</li><li>WasEmailEverVerified</li><ul> | [Lykke.Service.CustomerProfile](https://github.com/OpenMAVN/mavn.service.customerprofile) |
| event    | [CustomerWalletCreatedEvent](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events/CustomerWalletCreatedEvent.cs) | Customer wallet has been successfully created in private blockchain | <ul><li>CustomerId</li><li>TimeStamp</li><ul>                | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | [EmailCodeVerifiedEvent](https://github.com/OpenMAVN/MAVN.Service.CustomerManagement/tree/master/contract/MAVN.Service.CustomerManagement.Contract/Events/EmailCodeVerifiedEvent.cs) | Email verification code was verified                         | <ul><li>CustomerId</li><li>TimeStamp</li><ul>                | [Lykke.Service.CustomerManagement](https://github.com/OpenMAVN/mavn.service.customermanagement) |
| event    | CustomerPhoneVerifiedEvent                                   | Customer's phone was verified                                | <ul><li>CustomerId</li><li>TimeStamp</li><li>WasPhoneEverVerified</li><ul> | [Lykke.Service.CustomerManagement](https://github.com/OpenMAVN/mavn.service.customermanagement) |

### WalletManagmentRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| event    | [BonusReceivedEvent](https://github.com/OpenMAVN/MAVN.Service.WalletManagement/tree/master/contract/MAVN.Service.WalletManagement.Contract/Events/BonusReceivedEvent.cs) | Notify about received bonus                                  | <ul><li>TransactionId</li><li>ExternalOperationId</li><li>CustomerId</li> <li>PartnerId</li><li>LocationId</li><li>CampaignId</li><li>AssetSymbol</li> <li>Amount</li><li>BonusType</li><li>Timestamp</li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | [P2PTransferEvent](https://github.com/OpenMAVN/MAVN.Service.WalletManagement/blob/master/contract/MAVN.Service.WalletManagement.Contract/Events/P2PTransferEvent.cs) | Notify about completed tokens transfer                       | <ul><li>SenderCustomerId</li> <li>ReceiverCustomerId</li> <li>AssetSymbol</li> <li>Amount</li> <li>TransactionId</li> <li>ExternalOperationId</li> <li>Timestamp</li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | [BonusRewardDetectedEvent](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events//BonusRewardDetectedEvent.cs) | Notify that bonus reward was successfully stored in the blockchain. | <ul><li>CustomerId</li> <li>Amount</li> <li>BonusReason</li> <li>Timestamp</li> <li>RequestId</li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | [TransferDetectedEvent](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events//TransferDetectedEvent.cs) | Notify about transfer completion                             | <ul><li>TransactionHash</li> <li>SenderCustomerId</li> <li>ReceiverCustomerId</li> <li>Amount Timestamp</li> <li>RequestId</li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | [CustomerBalanceUpdatedEvent](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events/CustomerBalanceUpdatedEvent.cs) | Notify about customer balance update                         | <ul><li>CustomerId</li> <li>Balance</li> <li>Timestamp</li> <li>Reason <ul> <li>Transfer</li> <li>BonusReward</li> </ul> </li> <li>OperationId</li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | P2PTransferFailedEvent                                       | Notify about failed in BC P2P transfer                       | <ul><li>TransactionHash</li> <li>SenderCustomerId</li> <li> ReceiverCustomerId</li> <li> Amount </li> <li>Timestamp </li> <li>RequestId</li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | PartnerPaymentRequestCreatedEvent                            | Notify that a partner payment request has been created       | <ul><li>PaymentRequestId </li> <li>CustomerId </li> <li>PartnerId</li></ul> | [Lykke.Service.PartnersPayments](https://github.com/OpenMAVN/mavn.service.partnerspayments/tree/master/src/) |
| event    | TransactionFailedEvent                                       | Notify about a failed transaction in BC                      | <ul><li>OperationId</li></ul>                                | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | PartnersPaymentProcessedEvent                                | Notify that tokens for a partners payment have been reserved | <ul><li>PaymentRequestId </li> <li>CustomerId </li> <li>PartnerId</li> <li> LocationId</li> <li> Amount</li> <li> Timestamp</li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | RefundPartnersPaymentEvent                                   | Notify about a refunded partners payment                     | <ul><li>PaymentRequestId</li> <li> CustomerId </li> <li>PartnerId</li> <li> LocationId </li> <li> Amount </li> <li> Timestamp </li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | SuccessfulPaymentTransferEvent                               | Notify about a successful payment transfer                   | <ul><li>TransferId</li> <li> CustomerId</li> <li> CampaignId </li> <li>InvoiceId </li> <li>Amount  </li> <li>Timestamp</li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | RefundPaymentTransferEvent                                   | Notify about a refunded payment transfer                     | <ul><li>TransferId</li> <li> CustomerId</li> <li> CampaignId </li> <li>InvoiceId</li> <li> Amount  Timestamp</li></ul> | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | [PartnersPaymentStatusUpdatedEvent](https://github.com/OpenMAVN/MAVN.Service.PartnersPayments/blob/master/contract/MAVN.Service.PartnersPayments.Contract/PartnersPaymentStatusUpdatedEvent.cs) | Notify about a PartnerPayment status update                  |                                                              | [Lykke.Service.PartnersPayments](https://github.com/OpenMAVN/mavn.service.partnerspayments/) |
| event    | P2PTransferDetectedEvent                                     | Notify about p2p transfer detected in BC                     | <ul><li>TransactionHash</li> <li> SenderCustomerId </li> <li>ReceiverCustomerId </li> <li>Amount  Timestamp</li> <li>  RequestId</li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | TransferToExternalFailedEvent                                | Notify about failed transfer to public BC                    | <ul><li>CustomerId</li> <li>Amount</li></ul>                 | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | [CustomerWalletStatusUpdatedEvent](https://github.com/OpenMAVN/MAVN.Service.WalletManagement/tree/master/contract/MAVN.Service.WalletManagement.Contract/Events/CustomerWalletStatusUpdatedEvent.cs) | Notify that wallet status has been chanegd                   | <ul><li>CustomerId</li> <li> WalletBlocked</li></ul>         | [Lykke.Service.WalletManagement](https://github.com/OpenMAVN/mavn.service.walletmanagement/tree/master/src) |
| event    | WalletLinkingStatusChangeFailedEvent                         | Notify about wallet linking/unlinking transaction failure in private  blockchain | <ul><li>CustomerId </li> <li>PrivateAddress </li> <li>PublicAddress Fee</li></ul> | Lykke.Service.CrossChainWalletLinke                          |
| event    | SeizeToInternalDetectedEvent                                 | Notify about seize event in the public blockchain.           | <ul><li>OperationId </li> <li>Account</li> <li> Reason </li> <li>Amount </li> <li>Timestamp</li></ul> | [Lykke.Job.EthereumBridge](https://github.com/OpenMAVN/mavn.job.ethereumbridge/tree/master/src) |
| event    | ReferralStakeBurntEvent                                      | Notify the part of a stake was burnt                         | <ul><li>ReferralId </li> <li>CampaignId </li> <li>CustomerId </li> <li>Amount </li> <li>Timestamp</li></ul> | [Lykke.Service.Staking](https://github.com/OpenMAVN/MAVN.Service.Staking/tree/master/contract/MAVN.Service.Staking.Contract/Events) |
| event    | SeizedFromCustomerEvent                                      | Notify the tokens were seized from a customer                | <ul><li>CustomerId </li> <li>Amount</li></ul>                | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/mavn.service.privateblockchainfacade/tree/master/src/) |
| event    | ReferralStakeReservedEvent                                   | Notify that tokens for a stake were reserved                 | <ul><li>ReferralId </li> <li>CampaignId </li> <li>CustomerId </li> <li>Amount </li> <li>Timestamp</li></ul> | [Lykke.Service.Staking](https://github.com/OpenMAVN/MAVN.Service.Staking/tree/master/contract/MAVN.Service.Staking.Contract/Events) |
| event    | ReferralStakeReleasedEvent                                   | Notify that part of a stake was released                     | <ul><li>ReferralId </li> <li>CampaignId </li> <li>CustomerId </li> <li>Amount </li> <li>Timestamp</li></ul> | [Lykke.Service.Staking](https://github.com/OpenMAVN/MAVN.Service.Staking/tree/master/contract/MAVN.Service.Staking.Contract/Events) |
| event    | ReferralStakeStatusUpdatedEvent                              | Notify that the status of a referral stake was changed       | <ul><li>ReferralId </li> <li>Status</li></ul>                | [Lykke.Service.Staking](https://github.com/OpenMAVN/MAVN.Service.Staking/tree/master/contract/MAVN.Service.Staking.Contract/Events) |
| event    | TransferToExternalRequestedEvent                             | Notify that Transfer to the public network was requested by a customer | <ul><li>CustomerId </li> <li>Amount</li> <li> OperationId  </li> <li>PrivateBlockchainGatewayContractAddress  </li></ul> | [Lykke.Service.CrossChainTransfers](https://github.com/OpenMAVN/MAVN.Service.CrossChainTransfers/tree/master/contract/MAVN.Service.CrossChainTransfers.Contract/TransferToExternalRequestedEvent.cs) |
| event    | TransferToExternalProcessedEvent                             | Notify that Transfer to the  public network was processed by the internal  network | <ul><li>CustomerId </li> <li>Amount </li> <li>TxHash </li> <li>PrivateAddress</li> <li> PublicAddress  </li> <li>InternalTransferId  </li></ul> | [Lykke.Service.CrossChainTransfers](https://github.com/OpenMAVN/MAVN.Service.CrossChainTransfers/tree/master/contract/MAVN.Service.CrossChainTransfers.Contract/TransferToExternalProcessedEvent.cs) |
| event    | TransferToInternalProcessedEvent                             | Notify that transfer from the public network was processed   | <ul><li>MasterWalletAddress </li> <li>PrivateBlockchainGatewayContractAddress </li> <li>Data </li> <li> OperationId  </li></ul> | [Lykke.Service.CrossChainTransfers](https://github.com/OpenMAVN/MAVN.Service.CrossChainTransfers/tree/master/contract/MAVN.Service.CrossChainTransfers.Contract/TransferToInternalProcessedEvent.cs) |
| event    | TransferToInternalCompletedEvent                             | Notify that transfer to the internal  network process was finalized | <ul><li>OperationId</li> <li> CustomerId </li> <li>Amount </li> <li>PrivateAddress  </li> <li>PublicAddress  </li></ul> | [Lykke.Service.CrossChainTransfers](https://github.com/OpenMAVN/MAVN.Service.CrossChainTransfers/tree/master/contract/MAVN.Service.CrossChainTransfers.Contract/TransferToInternalCompletedEvent.cs) |
| event    | WalletLinkingStatusChangeRequestedEvent                      | Notify that Wallet Linking was requested by a customer       | <ul><li>CustomerId </li> <li>PrivateAddress</li> <li> PublicAddress </li> <li>Fee </li> <li> MasterWalletAddress </li> <li>EventId  </li> <li>Direction  </li></ul> | [Lykke.Service.CrossChainWalletLinke](https://github.com/OpenMAVN/MAVN.Service.CrossChainWalletLinker/tree/master/contract/MAVN.Service.CrossChainWalletLinker.Contract/Linking/WalletLinkingStatusChangeRequestedEvent.cs) |
| event    | WalletLinkingStatusChangeCompletedEvent                      | Notify that Wallet Linking was completed in the private blockchain | <ul><li>CustomerId </li> <li>PrivateAddress</li> <li> PublicAddress </li> <li>EventId  </li> <li>Fee  </li></ul> | [Lykke.Service.CrossChainWalletLinke](https://github.com/OpenMAVN/MAVN.Service.CrossChainWalletLinker/tree/master/contract/MAVN.Service.CrossChainWalletLinker.Contract/Linking/WalletLinkingStatusChangeCompletedEvent.cs) |
| event    | WalletLinkingStatusChangeFinalizedEvent                      | Notify that Wallet Linking was completed in both public and private  blockchains | <ul><li>PrivateAddress </li> <li>PublicAddress  </li></ul>   | [Lykke.Service.CrossChainWalletLinke](https://github.com/OpenMAVN/MAVN.Service.CrossChainWalletLinker/tree/master/contract/MAVN.Service.CrossChainWalletLinker.Contract/Linking/WalletLinkingStatusChangeFinalizedEvent.cs) |
| event    | FeeCollectedEvent                                            | Notify that a fee was collected                              | <ul><li>EventId</li> <li> CustomerId</li> <li> WalletAddress </li> <li>Amount</li> <li> Reason</li> <li>TrannsactionHash  </li></ul> | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events/FeeCollectedEvent.cs) |
| event    | SeizedFromCustomerEvent                                      | Notify that some amount was seized from a customer           | <ul><li>CustomerId </li> <li>Amount  </li></ul>              | [Lykke.Service.PrivateBlockchainFaca](https://github.com/OpenMAVN/MAVN.Service.PrivateBlockchainFacade/tree/master/contract/MAVN.Service.PrivateBlockchainFacade.Contract/Events/SeizedFromCustomerEvent.cs) |
| event    | SeizeBalanceFromCustomerCompletedEvent                       | Notify that the whole balance for a customer was seized (when the  account was removed) | <ul><li>CustomerId  </li></ul>                               | Lykke.Service.PrivateBlockchainFaca                          |
| event    | VoucherTokensReservedEvent                                   | Notify about tokens reservation for purchased voucher        | <ul><li>TransferId </li> <li>CustomerId </li> <li>SpendRuleId </li> <li>VoucherId</li> <li>  Amount </li> <li>Timestamp  </li></ul> | Lykke.Service.Vouchers                                       |
| event    | VoucherTokensUsedEvent                                       | Notify about burned tokens for purchased voucher             | <ul><li>TransferId </li> <li>CustomerId </li> <li>SpendRuleId </li> <li>VoucherId</li> <li>  Amount </li> <li>Timestamp  </li></ul> | Lykke.Service.Vouchers                                       |

### BonusManagmentRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| command  | [BonusIssuedEven](https://github.com/OpenMAVN/MAVN.Service.BonusEngine/tree/master/contract/MAVN.Service.BonusEngine.Contract/Events/BonusIssuedEvent.cs) | Notify about an issued bonus for customer                    | <ul><li>CustomerId</li> <li> OperationId </li> <li>PartnerId </li> <li>LocationId </li> <li>CampaignId </li> <li>UnitLocationCode</li> <li> BonusOperationType <ul> <li> ConditionReward</li> <li>  CampaignReward</li></ul></li> <li> Amount</li> <li> TimeStamp </li></ul> | [Lykke.Service.BonusEngine](https://github.com/OpenMAVN/mavn.service.bonusengine) |
| event    | [BonusTriggerEvent](https://github.com/OpenMAVN/MAVN.Service.BonusTriggerAgent/tree/master/contract/MAVN.Service.BonusTriggerAgent.Contract/Events/BonusTriggerEvent.cs) | Notify about the new trigger for Bonus Engine                | <ul><li>CustomerId </li> <li>Type </li> <li>PartnerId </li> <li>LocationId </li> <li>TimeStamp </li> <li> Data  </li></ul> | [Lykke.Service.BonusTriggerAgent](https://github.com/OpenMAVN/mavn.service.bonustriggeragent) |
| event    | [BonusTypeDetectedEvent](https://github.com/OpenMAVN/MAVN.Service.BonusTriggerAgent/tree/master/contract/MAVN.Service.BonusTriggerAgent.Contract/Events/BonusTypeDetectedEvent.cs) | Represents Bonus Type detection                              | <ul><li>DisplayName</li> <li> EventName </li> <li>Vertical</li> <li> AllowInfinite  </li> <li>AllowPercentage  </li></ul> | [Lykke.Service.BonusTriggerAgent](https://github.com/OpenMAVN/mavn.service.bonustriggeragent) |
| event    | [ParticipatedInCampaignEvent](https://github.com/OpenMAVN/MAVN.Service.BonusEngine/tree/master/contract/MAVN.Service.BonusEngine.Contract/Events/ParticipatedInCampaignEvent.cs) | Publish once customer participates in a campaign             | <ul><li>CampaignId</li> <li> CustomerId  </li></ul>          | [Lykke.Service.BonusEngine](https://github.com/OpenMAVN/mavn.service.bonusengine) |
| event    | [CustomerTierChangedEvent](https://github.com/OpenMAVN/MAVN.Service.Tiers/tree/master/contract/MAVN.Service.Tiers.Contract/CustomerTierChangedEvent.cs) | Notify about the customer reward tier changed                | <ul><li>CustomerId </li> <li>TierId  </li></ul>              | [Lykke.Service.Tiers](https://github.com/OpenMAVN/mavn.service.tiers) |
| event    | CampaignChangeEvent                                          | Represents an event sent from Campaign Service when a campaign is  changed | <ul><li>CampaignId </li> <li>TimeStamp</li> <li> Status  <ul><li> Pending </li> <li>Active </li> <li>Completed</li> <li> Inactive  </li> </ul></li><li>Action  <ul> <li>Created</li> <li> Edited </li> <li>Activated </li> <li>Completed  </li> <li>Deleted  </li></ul></li></ul> | [Lykke.Service.Campaign](https://github.com/OpenMAVN/MAVN.Service.Campaign/tree/master/contract/MAVN.Service.Campaign.Contract) |

### PartnersIntegrationRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| event    | [BonusCustomerTriggerEvent](https://github.com/OpenMAVN/MAVN.Service.PartnersIntegration/tree/master/contract/MAVN.Service.PartnersIntegration.Contract/BonusCustomerTriggerEvent.cs) | Represents  customer bonus event, sent by a Partner (usually via the Partner API) | <ul><li>CustomerId </li> <li>PartnerId </li> <li><li>LocationId</li> <li>Amount</li> <li>Currency </li></ul> | [Lykke.Service.PartnersIntegration](https://github.com/OpenMAVN/mavn.service.partnersintegration/tree/master/src/) |

### NotificationSystemRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| command  | [EmailMessageEvent](https://github.com/OpenMAVN/MAVN.Service.NotificationSystem/tree/master/contract/MAVN.Service.NotificationSystem.SubscriberContract/EmailMessageEvent.cs) | Represents a command for sending email messages              | <ul><li>CustomerId </li> <li>SubjectTemplateId </li> <li>MessageTemplateId</li> <li>TemplateParameters</li> <li>Source</li></ul> | [Lykke.Service.NotificationSystem](https://github.com/OpenMAVN/mavn.service.notificationsystem/tree/master/src) |
| command  | [SmsEvent](https://github.com/OpenMAVN/MAVN.Service.NotificationSystem/tree/master/contract/MAVN.Service.NotificationSystem.SubscriberContract/SmsEvent.cs) | Represents a command for sending SMS                         | <ul><li>CustomerId </li> <li>MessageTemplateId </li> <li>TemplateParameters </li> <li>Source  </li></ul> | [Lykke.Service.NotificationSystem](https://github.com/OpenMAVN/mavn.service.notificationsystem/tree/master/src) |
| event    | [BrokerMessage](https://github.com/OpenMAVN/MAVN.Service.NotificationSystem/tree/master/contract/MAVN.Service.NotificationSystem.Contract/MessageContracts/BrokerMessage.cs) | Represents a broker message event, sent from the NotificationSystem to  the NotificationSystemBroker | <ul><li>MessageId </li> <li>Channel</li> <li> Properties  </li></ul> | [Lykke.Service.NotificationSystem](https://github.com/OpenMAVN/mavn.service.notificationsystem/tree/master/src) |
| command  | [PushNotificationEvent](https://github.com/OpenMAVN/MAVN.Service.NotificationSystem/tree/master/contract/MAVN.Service.NotificationSystem.SubscriberContract/PushNotificationEvent.cs) | Represents a push notification event                         | <ul><li>CustomerId </li> <li>MessageTemplateId</li> <li> CustomPayload TemplateParameters </li> <li>Source  </li></ul> | [Lykke.Service.NotificationSystem](https://github.com/OpenMAVN/mavn.service.notificationsystem/tree/master/src) |
| event    | [UpdateAuditMessageEvent](https://github.com/OpenMAVN/MAVN.Service.NotificationSystemBroker/tree/master/contract/MAVN.Service.NotificationSystemBroker.Contract/UpdateAuditMessageEvent.cs) | Represents audit message update event                        | <ul><li>MessageId </li> <li>SendingTimestamp </li> <li>DeliveryStatus</li> <li> DeliveryComment  </li></ul> | [Lykke.Service.NotificationSystemBrok](https://github.com/OpenMAVN/mavn.service.notificationsystembroker/tree/master/src/) |
| event    | [CreateAuditMessageEvent](https://github.com/OpenMAVN/MAVN.Service.NotificationSystem/tree/master/contract/MAVN.Service.NotificationSystem.Contract/MessageContracts/CreateAuditMessageEvent.cs) | Represents audit message creation event                      | <ul><li>Timestamp</li> <li> MessageId </li> <li>MessageType </li> <li>CustomerId</li> <li> SubjectTemplateId  </li> <li>MessageTemplateId </li> <li>Source  </li> <li>CallType  </li> <li>FormattingStatus  </li></ul> | [Lykke.Service.NotificationSystem](https://github.com/OpenMAVN/mavn.service.notificationsystem/tree/master/src) |

### ReferralRabbitMQ

| **type** | **name**                                                     | **comments**                                                 | **data**                                                     | **source**                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| event    | FriendReferralEvent                                          | Represents a referral event sent from Referral Service when the  customer successfully referres another customer | <ul><li>ReferrerId </li> <li>ReferredId </li> <li>Timestamp  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | PurchaseReferralEvent                                        | Represents a purchase event sent from Referral Service when the  customer successfully do a purchase with referred id | <ul><li>ReferrerId</li> <li> ReferredId</li> <li> Amount </li> <li>Timestamp  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | PropertyLeadApprovedReferralEvent                            | Represents an event sent from Referral Service when a property lead is  approved | <ul><li>ReferrerId </li> <li>Timestamp</li> <li> StakedCampaignId  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | PropertyPurchaseReferralEvent     **(not used anymore)**     | Represents an event sent from Referral Service when a property is  purchased | <ul><li>ReferrerId</li> <li> Timestamp  </li></ul>           | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | ReferralPropertyFirstPurchaseEvent     **(not used anymore)** | Represents an event sent from Referral Service when a property is  purchased **commissio n 1** | <ul><li>ReferrerId </li> <li>Timestamp </li> <li> VatAmount</li> <li> SellingPropertyPrice </li> <li>NetPropertyPrice </li> <li>DiscountAmount </li> <li> CalculatedCommissionAmount </li> <li>CurrencyCode </li> <li> CampaignId  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | ReferralPropertySecondPurchaseEvent     **(not used anymore)** | Represents an event sent from Referral Service when a property is  purchased **commissio n 2** | <ul><li>ReferrerIdc</li> <li> Timestamp  </li> <li>VatAmount</li> <li> SellingPropertyPrice </li> <li>NetPropertyPrice </li> <li>DiscountAmount  </li> <li>CalculatedCommissionAmount </li> <li>CurrencyCode</li> <li>  CampaignId  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | OfferToPurchaseByLeadEvent                                   | Represents an event sent from Referral Service when an offer to  purchase by lead is made | <ul><li>BuyerCustomerId </li> <li>Timestamp  </li></ul>      | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | LeadStateChangedEvent                                        | Represents an event sent when a lead's state is changes      | <ul><li>LeadId </li> <li>TimeStamp </li> <li>State  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |
| event    | HotelReferralUsedEvent                                       | Represents an event sent when a hotel referral is used       | <ul><li>CustomerId </li> <li>PartnerId </li> <li>LocationId </li> <li>Amount</li> <li> CurrencyCode </li> <li> StakedCampaignId  </li></ul> | [Lykke.Service.Referral](https://github.com/OpenMAVN/mavn.service.referral/tree/master/src) |

### SchedulerRabbitMQ

| **type** | **name**  | **comments**                                                 | **data**                      | **source**                                                   |
| -------- | --------- | ------------------------------------------------------------ | ----------------------------- | ------------------------------------------------------------ |
| event    | TimeEvent | Represents an event that is published on configured TimeStamp | <ul><li>TimeStamp  </li></ul> | [Lykke.Service.Scheduler](https://github.com/OpenMAVN/MAVN.Service.Scheduler/tree/master/contract/MAVN.Service.Scheduler.Contract/Events) |

## RabbitMQ Connection List

- UserManagmentRabbitMQ 
- WalletManagmentRabbitMQ 
- BonusManagmentRabbitMQ 
- EmaarIntegrationRabbitMQ 
- NotificationSystemRabbitMQ 
- ReferralRabbitMQ 
- CampaignRabbitMQ 
- SchedulerRabbitMQ 
- PrivateBlockchainRabbitMQ

Please use in settings.yaml one of these keys for describe connection string to RabbitMQ.

```
RabbitMqConnString:
  settings-key: UserManagmentRabbitMQ
  types:
  - RabbitMq
```

## Exchange name

**Name format for the exchange** 

lykke.<system\area>.<eventtype and details> 

example:

```
lykke.customer.session - created new session for customer
system\aria: customer
event: session
```

If an event it is a command for doing something, then please use suffix ".command" in event type.

```
lykke.wallet.command.cashin.bonus - make cash-in bonus for wallet
system\aria: wallet
event: command.cashin.bonus

```

**Configuration exchange name**

Please write in code name of the exchange. Do not need to put the name of exchange in the settings file. Name of exchange - it is part of the specification and this part should be stable and no reason change names form DevOps side.